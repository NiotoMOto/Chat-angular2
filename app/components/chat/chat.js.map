{"version":3,"sources":["components/chat/chat.ts"],"names":["Chat","Chat.constructor","Chat.keyUpMessage","Chat.sendMessage","Chat.onSubmit"],"mappings":"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","file":"components/chat/chat.js","sourcesContent":["/// <reference path=\"../../models.ts\"/>\r\n\r\nimport {Component, View, NgIf, NgFor} from 'angular2/angular2';\r\nimport {FORM_DIRECTIVES, FormBuilder, ControlGroup, Control} from 'angular2/angular2';\r\nimport {Validators} from 'angular2/angular2';\r\nimport {User} from '../../models';\r\n\r\n@Component({\r\n  selector: 'chat',\r\n  viewBindings: [FormBuilder]\r\n})\r\n@View({\r\n  templateUrl: './app/components/chat/chat.html',\r\n  directives: [NgFor, NgIf, FORM_DIRECTIVES]\r\n})\r\n\r\n// const chatIo = io( 'http://localhost:4000' );\r\n// console.log(chatIo);\r\n\r\nexport class Chat {\r\n  user: User;\r\n  logForm: ControlGroup;\r\n  newUser : string;\r\n  chatIo: Socket ;\r\n  messages: Array;\r\n  constructor(fb: FormBuilder){\r\n    this.messages = [];\r\n    this.chatIo = io( 'http://localhost:4000');\r\n    this.chatIo.on('chat:message', (m) => {\r\n      this.messages.push(m);\r\n      setTimeout(() => {\r\n        var objDiv = document.getElementsByClassName('messages-container')[0];\r\n        objDiv.scrollTop = objDiv.scrollHeight;\r\n      }, 100);\r\n    });\r\n    this.logForm = fb.group({\r\n      newUser: ['', Validators.required]\r\n    });\r\n    this.sendForm = fb.group({\r\n      message: ['', Validators.required]\r\n    });\r\n    this.newUser = this.logForm.controls.newUser;\r\n    this.message = this.sendForm.controls.message;\r\n  }\r\n\r\n  keyUpMessage(e){\r\n    if (e.keyCode === 13 && !e.shiftKey) {\r\n      this.sendMessage();\r\n    }\r\n  }\r\n\r\n  sendMessage() {\r\n    console.log(this.sendForm.valid);\r\n    if (this.sendForm.valid) {\r\n      this.chatIo.emit('user:message', this.message.value);\r\n      this.sendForm.controls.message.updateValue('');\r\n    }\r\n  }\r\n\r\n  onSubmit() {\r\n    if (this.logForm.valid) {\r\n      this.user = new User(this.newUser.value);\r\n    }\r\n  }\r\n}\r\n"],"sourceRoot":"/source/"}